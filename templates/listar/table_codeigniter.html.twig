{% extends 'base_codeigniter.html.twig' %}

{% block title %}Hello GeoController!{% endblock %}

{% block body %}

    <style>
    .btn-danger {
        color: #fff;
        background-color: #1d293e;
        border-color: #1d293e;
    }

    .btn-warning {
        color: #212529;
        background-color: #ffc107;
        border-color: #ffc107;
        margin-left:5px;
    }
    </style>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12" style="margin-top:20px;">
                <h4>Table CodeIgniter</h4>
            </div>
            <div class="col-md-12">
                <p>Pruebas con la tabla del codeigniter</p>
            </div>
            <div class="col-md-10">
                <div class="table-responsive">
                    {{ table.generate()|raw }}
                </div>
            </div>
        </div>
    </div>

    <script>

        let tabla = "";

        function getLanguage() {

            var langMap = {
                en: {
                    path: 'English',
                    mods: {
                        LengthMenu: "Display _MENU_ records per page - custom test"
                    }
                },
                es: {
                    path: 'Spanish',
                    mods: {
                        LengthMenu: "Mostrar _MENU_ registros - algo muy especial..."
                    }
                }
            };

            // var lang = $('html').attr('lang');
            var lang = "es";
            var path = '//cdn.datatables.net/plug-ins/1.10.13/i18n/';
            var result = null;

            $.ajax({
                async: false,
                url: path + langMap[lang].path + '.json',
                success: function(obj) {
                    result = $.extend({}, obj, langMap[lang].mods)
                }
            })
            return result
        }

        $(function() {
           tabla = $('table').DataTable({
              "columnDefs": [
                    { "width": "25%", "targets": 0 , "orderable": true },
                    { "width": "25%", "targets": 1 , "orderable": true },
                    { "width": "25%", "targets": 2 , "orderable": true },
                    { "width": "25%", "targets": 3 , "orderable": true },
              ],
              "order": [[ 0, "asc" ]],
              "pageLength":10,
              "lengthMenu": [[10, 20, 50 , 100, 200, 300 , 500 , 1000], [10, 20, 50 , 100, 200, 300, 500 , 1000,  "Todos"]],
              //"language": getLanguage(),
              "bLengthChange" : false, //thought this line could hide the LengthMenu
              "bInfo":true,
              "searching": true,
              "paging":true,
              //"language": getLanguage(),
           });
           // tabla.page.len(-1).draw();
        });
    </script>

{% endblock %}